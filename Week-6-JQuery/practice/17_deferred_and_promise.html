<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>

<body>

</body>
<script>
    function asyncFunction() {
        let deferred = $.Deferred()
        setTimeout(() => {
            let flag = true
            if (flag) {
                deferred.resolve("Promise resolved.")
            } else {
                deferred.reject("Promise rejected.")
            }
        }, 2000);
        // if resolved, any .done() will be triggered and is sent tocallback queue and then to callstack; same for rejected
        return deferred.promise(); 
    }

    asyncFunction()
        .done(result => console.log(result))
        .fail(error => console.error(error))
        .always(()=>{console.log("Runs always.");})

</script>

</html>